@inject IServISApi api

<h3>Správa typov strojov</h3>

<ExcavatorTypeForm @bind-ExcavatorType="SelectedExcavatorType" AfterValidSubmit="async () => await ReloadExcavatorTypesAsync()" />

<ItemsTableLister ItemType="ExcavatorType"
				  @ref="excavatorTypesLister"
				  @bind-SelectedItem="SelectedExcavatorType"
				  Title="Zoznam typov strojov"
				  Context="et"
				  GetItemsAsync="async (int numberOfExcavatorTypes, int startIndex) =>
									await api.GetExcavatorTypesAsync(numberOfExcavatorTypes, startIndex)"
				  GetItemsTotalCountAsync="async () => await api.GetExcavatorTypesCountAsync()"
				  DeleteItemAsync="async (excavatorType) => await api.DeleteExcavatorTypeAsync(excavatorType)" >
	<HeadCols>
		<th>Značka</th>
		<th>Kategória</th>
		<th>Počet strojov</th>
	</HeadCols>
	<BodyCols>
		<td>@et.Brand.Brand</td>
		<td>@et.Category.Category</td>
		<td>@et.ExcavatorsOfThisType.Count</td>
	</BodyCols>
</ItemsTableLister>

@code {
	private ItemsTableLister<ExcavatorType> excavatorTypesLister = null!;

	public ExcavatorType SelectedExcavatorType { get; private set; } = new();

	public async Task ReloadExcavatorTypesAsync()
	{
		await excavatorTypesLister.ReloadItemsAsync();
	}
}
